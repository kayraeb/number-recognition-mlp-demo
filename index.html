<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Recognition Demo </title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
</head>
<body>

    <div class="xp-desktop">
        <div class="deck-container">

            <!-- Left Panel: Controls -->
            <div class="xp-window left-panel">
                <div class="window-title-bar">
                    <span class="title-text">Controls</span>
                    <div class="title-controls">
                        <button class="win-btn minimize"></button>
                        <button class="win-btn maximize"></button>
                        <button class="win-btn close"></button>
                    </div>
                </div>
                <div class="window-body">
                    <fieldset class="xp-fieldset">
                        <legend>System Status</legend>
                        <div class="status-row">
                            <div class="indicator" id="statusIndicator"></div>
                            <span id="statusText">Booting...</span>
                        </div>
                        <div id="latencyMetric" class="xp-dim">Latency: -- ms</div>
                    </fieldset>

                    <fieldset class="xp-fieldset">
                        <legend>Operations</legend>
                        <button id="clearBtn" class="xp-btn">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Gnome-edit-clear.svg/16px-Gnome-edit-clear.svg.png" alt="" class="btn-icon">
                            Clear Canvas
                        </button>
                        <button id="predictBtn" class="xp-btn default" disabled>
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Gnome-system-run.svg/16px-Gnome-system-run.svg.png" alt="" class="btn-icon">
                            Start Prediction
                        </button>
                    </fieldset>

                    <fieldset class="xp-fieldset sensor-group">
                        <legend>Neural Sensor (28px)</legend>
                        <div class="sensor-housing">
                            <!-- Canvas remains 28x28 logically, CSS scales it up visually -->
                            <canvas id="sensorCanvas" width="28" height="28"></canvas>
                        </div>
                    </fieldset>
                </div>
            </div>

            <!-- Center Panel: Drawing Area -->
            <div class="xp-window center-panel">
                <div class="window-title-bar">
                    <span class="title-text">Input Matrix - Untitled</span>
                    <div class="title-controls">
                        <button class="win-btn minimize"></button>
                        <button class="win-btn maximize"></button>
                        <button class="win-btn close"></button>
                    </div>
                </div>
                <div class="window-body paint-body">
                    <div class="paint-toolbar">
                        <div class="tool active">✎</div>
                        <div class="tool">▧</div>
                        <div class="tool">A</div>
                        <div class="tool">/</div>
                    </div>
                    <!-- Container for full-size canvas -->
                    <div class="canvas-fill-area" id="canvasContainer">
                        <canvas id="drawCanvas"></canvas>
                    </div>
                    <div class="status-bar">
                        <div class="sb-item">For Help, click Help Topics on the Help Menu.</div>
                        <div class="sb-item" id="resolutionDisplay">-- x -- px</div>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Results -->
            <div class="xp-window right-panel">
                <div class="window-title-bar">
                    <span class="title-text">Analysis</span>
                    <div class="title-controls">
                        <button class="win-btn minimize"></button>
                        <button class="win-btn maximize"></button>
                        <button class="win-btn close"></button>
                    </div>
                </div>
                <div class="window-body">
                    <fieldset class="xp-fieldset result-fieldset">
                        <legend>Classification</legend>
                        <div class="digit-display">
                            <span id="predictionResult">?</span>
                        </div>
                    </fieldset>

                    <fieldset class="xp-fieldset">
                        <legend>Confidence Dist.</legend>
                        <div class="contenders-list" id="contendersList">
                            <!-- Populated by JS -->
                        </div>
                    </fieldset>

                    <fieldset class="xp-fieldset">
                        <legend>Certainty</legend>
                        <div class="xp-progress-container">
                            <div class="xp-progress-bar">
                                <div id="confidenceBar" class="xp-progress-fill"></div>
                            </div>
                        </div>
                        <span id="confidenceValue">0.0%</span>
                    </fieldset>
                </div>
            </div>

        </div>
        
        <!-- Taskbar Aesthetic -->
        <div class="xp-taskbar">
            <div class="start-button">
                <span class="logo">❖</span> start
            </div>
            <div class="task-divider"></div>
            <div class="task-item active">
                <span class="task-icon">✎</span> Number Recog...
            </div>
            <div class="tray-area">
                <div class="time"> kayraeren </div>
            </div>
        </div>
    </div>

    <!-- Hidden canvas used for processing, size is managed by JS -->
    <canvas id="hiddenCanvas" style="display:none;"></canvas>
    <script src="script.js"></script>
</body>
</html>

